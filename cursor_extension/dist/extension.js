"use strict";var I=Object.create;var p=Object.defineProperty;var x=Object.getOwnPropertyDescriptor;var S=Object.getOwnPropertyNames;var M=Object.getPrototypeOf,C=Object.prototype.hasOwnProperty;var U=(o,s)=>{for(var t in s)p(o,t,{get:s[t],enumerable:!0})},f=(o,s,t,r)=>{if(s&&typeof s=="object"||typeof s=="function")for(let n of S(s))!C.call(o,n)&&n!==t&&p(o,n,{get:()=>s[n],enumerable:!(r=x(s,n))||r.enumerable});return o};var h=(o,s,t)=>(t=o!=null?I(M(o)):{},f(s||!o||!o.__esModule?p(t,"default",{value:o,enumerable:!0}):t,o)),A=o=>f(p({},"__esModule",{value:!0}),o);var T={};U(T,{activate:()=>R,deactivate:()=>b});module.exports=A(T);var e=h(require("vscode")),i=h(require("fs")),c=h(require("path"));function k(o){if(!o.includes("```"))return o;let s=o.split(/\r?\n/),t=s.findIndex(d=>d.trim().length>0),n=s.slice(t+1).filter(d=>!d.trim().match(/^```[a-zA-Z]*$/)).map(d=>d.replace(/```$/,""));for(;n.length>0&&n[0].trim()==="";)n.shift();for(;n.length>0&&n[n.length-1].trim()==="";)n.pop();return n.join(`
`)}async function P(o){try{console.log("\u{1F680} URI received:",o.toString()),e.window.showInformationMessage(`\u{1F680} URI i\u015Fleniyor: ${o.path}`);let s=new URLSearchParams(o.query),t=s.get("file");if(!t){let m="VS Code URI eksik parametre: file gerekli";console.error("\u274C",m),e.window.showErrorMessage(m);return}console.log("\u{1F4CB} \xC7\u0131kar\u0131lan dosya yolu:",t);let r=s.get("content");if(r)r=decodeURIComponent(r),console.log("\u{1F4CB} URI'den okunan i\xE7erik uzunlu\u011Fu:",r.length),e.window.showInformationMessage(`\u{1F4CB} URI'den okunan i\xE7erik: "${r}" (${r.length} karakter)`);else{if(r=await e.env.clipboard.readText(),!r){e.window.showInformationMessage("Pano bo\u015F. L\xFCtfen AI Studio'dan kodu tekrar g\xF6nderin.");return}console.log("\u{1F4CB} Panodan okunan i\xE7erik uzunlu\u011Fu:",r?.length),e.window.showInformationMessage(`\u{1F4CB} Panodan okunan i\xE7erik: "${r}" (${r.length} karakter)`)}let n=k(r);if(e.window.showInformationMessage(`\u{1F9F9} Temizlenen i\xE7erik: "${n}" (${n.length} karakter)`),!e.workspace.workspaceFolders){e.window.showErrorMessage("\xC7al\u0131\u015Fma klas\xF6r\xFC a\xE7\u0131k de\u011Fil");return}let d=e.workspace.workspaceFolders[0].uri.fsPath,l;c.isAbsolute(t)?l=t:l=c.join(d,t);let a=c.dirname(l);i.existsSync(a)||i.mkdirSync(a,{recursive:!0}),i.writeFileSync(l,n,"utf-8");let w=await e.workspace.openTextDocument(l);await e.window.showTextDocument(w),e.window.showInformationMessage(`\u2705 Kod ${t} dosyas\u0131na yaz\u0131ld\u0131 ve a\xE7\u0131ld\u0131`)}catch(s){console.error("\u274C URI i\u015Fleme hatas\u0131:",s),e.window.showErrorMessage(`VS Code URI i\u015Fleme hatas\u0131: ${s}`)}}function R(o){console.log("\u{1F389} AI Studio Copy extension is ACTIVATING!"),console.log("\u{1F527} Extension ID:",o.extension.id),console.log("\u{1F527} Extension version:",o.extension.packageJSON.version),console.log("\u{1F50D} Testing URI scheme support..."),e.window.showInformationMessage("\u{1F3AF} AI Studio Copy extension activated! URI handler ready.");let s=e.window.createStatusBarItem(e.StatusBarAlignment.Right,100);s.text="$(file-add) AI Studio",s.command="aistudiocopy.pasteToFile",s.tooltip="Paste code from clipboard to file",s.show(),console.log("\u2705 Status bar item created and shown");let t=e.window.registerUriHandler({handleUri:P});console.log("\u2705 URI handler registered"),console.log("\u{1F527} URI handler object:",t);let r=e.commands.registerCommand("aistudiocopy.pasteToFile",async()=>{try{console.log("\u{1F525} Paste command executed!"),e.window.showInformationMessage("\u{1F525} AI Studio Copy \xE7al\u0131\u015F\u0131yor!");let n=await e.env.clipboard.readText();if(!n.trim()){e.window.showErrorMessage("Pano bo\u015F, kopyalanm\u0131\u015F i\xE7erik bulunamad\u0131");return}let a=n.split(/\r?\n/)[0].match(/^(?:\/\/\s*(.+\.\w+)|#\s*(.+\.\w+)|\/\*\s*(.+\.\w+)\s*\*\/|<!--\s*(.+\.\w+)\s*-->|--\s*(.+\.\w+)|%\s*(.+\.\w+))/);if(!a){e.window.showErrorMessage(`\u0130lk sat\u0131rda dosya yolu bulunamad\u0131.
\xD6rnekler:
// src/components/Layout.tsx
# src/utils/helper.js
/* src/styles/app.css */
<!-- src/templates/page.html -->
-- src/queries/data.sql
% src/scripts/process.m`);return}let w=(a[1]||a[2]||a[3]||a[4]||a[5]||a[6]||"").trim();if(!w){e.window.showErrorMessage(`\u0130lk sat\u0131rda dosya yolu bulunamad\u0131.
\xD6rnekler:
// src/components/Layout.tsx
# src/utils/helper.js
/* src/styles/app.css */
<!-- src/templates/page.html -->
-- src/queries/data.sql
% src/scripts/process.m`);return}let m=k(n);if(!e.workspace.workspaceFolders){e.window.showErrorMessage("\xC7al\u0131\u015Fma klas\xF6r\xFC a\xE7\u0131k de\u011Fil");return}let v=e.workspace.workspaceFolders[0].uri.fsPath,u;c.isAbsolute(w)?u=w:u=c.join(v,w);let g=c.dirname(u);i.existsSync(g)||i.mkdirSync(g,{recursive:!0}),i.writeFileSync(u,m,"utf-8");let y=await e.workspace.openTextDocument(u);await e.window.showTextDocument(y),e.window.showInformationMessage(`\u2705 Kod ${w} dosyas\u0131na yaz\u0131ld\u0131 ve a\xE7\u0131ld\u0131`)}catch(n){console.error("\u274C Paste command error:",n),e.window.showErrorMessage(`Dosya yazma hatas\u0131: ${n}`)}});o.subscriptions.push(s,t,r),console.log("\u{1F3AF} AI Studio Copy extension FULLY ACTIVATED!"),e.window.showInformationMessage("\u{1F3AF} AI Studio Copy eklentisi aktif!")}function b(){console.log("\u{1F44B} AI Studio Copy extension deactivated")}0&&(module.exports={activate,deactivate});
